<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Amal Joshy</title>
<link rel="stylesheet" href="style.css">

</head>
<body>
  <section class="terminal-window" role="main" aria-label="Interactive terminal portfolio">
    <header class="terminal-top-bar" aria-hidden="true">
      <div class="controls" aria-label="Window controls">
        <span class="control-btn close"></span>
        <span class="control-btn minimize"></span>
        <span class="control-btn maximize"></span>
      </div>
      <div class="theme-toggle" role="button" aria-pressed="false" aria-label="Toggle light and dark mode" tabindex="0">🌙</div>
    </header>
    <section class="terminal-content" id="terminal-content" aria-live="polite" aria-relevant="additions">
    </section>

    <form id="terminal-form" autocomplete="off" role="form" aria-label="Command line input">
      <div class="input-line">
        <span class="prompt" aria-hidden="true">$</span>
        <input type="text" id="cmdline" name="cmdline" aria-label="Type a command" autocomplete="off" autofocus spellcheck="false" />
      </div>
    </form>
  </section>

<script>
  (function(){
    'use strict';

    // Content
    const portfolioData = {
      whoami: 'Amal Joshy',
      role: 'Student',
      email: 'amaljoshy2205@gmail.com',
      github: 'github.com/amaljoshy-2006',
      profile: `Undergraduate Mathematics student at St. Joseph’s College, Devagiri (Autonomous), Kerala, India.\nPassionate about Python, web development, and learning.`,
      experience: `null`,
      education: `B.Sc. in Mathematics\nUniversity of Calicut — 2025\nRelevant coursework: Mathematics, Web Development, Algorithms, Java, Python`,
      skills: ['HTML', 'CSS', 'Java', 'JavaScript', 'Git'],
      projects: `Project One\nPersonal site: https://github.com/amaljoshy-2006/cv\nTech: HTML, CSS, Bootstrap`,
      availability: `Open to full-time roles, contract work, and remote collaboration.`,
      languages: `Malayalam — Native / Professional | English — Conversational`,
      help: `Available commands:\nwhoami - Show your name\nemail - Show contact email\ngithub - Show GitHub link\nprofile - Show profile summary\nexperience - Show work experience\neducation - Show education background\nskills - List skills\nprojects - Show projects\navailability - Show availability for work\nlanguages - Show spoken languages\nclear - Clear the terminal`
    };

 
    const terminalContent = document.getElementById('terminal-content');
    const form = document.getElementById('terminal-form');
    const input = document.getElementById('cmdline');
    const themeToggle = document.querySelector('.theme-toggle');
    const body = document.body;

    
    terminalContent.addEventListener('click', () => input.focus());

  
    function safeText(text){
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

   
    function formatOutput(cmd, data){
   
      if(cmd === 'github') {
        const url = 'https://' + data;
        return `<a href="${url}" target="_blank" rel="noopener noreferrer">${safeText(data)}</a>`;
      }
      if(cmd === 'projects') {
        return safeText(data).replace(/https?:\/\/[^\s]+/g, url => {
          return `<a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a>`;
        });
      }
      if(cmd === 'email') {
        return `<a href="mailto:${safeText(data)}">${safeText(data)}</a>`;
      }
      if(cmd === 'skills'){
        return '<ul>' + data.map(skill => `<li>${safeText(skill)}</li>`).join('') + '</ul>';
      }
      if(cmd === 'help') {
        return safeText(data);
      }
    
      return safeText(data).replace(/\n/g, '<br>');
    }

    function appendOutput(command, outputData){
      const cmdDiv = document.createElement('div');
      cmdDiv.className = 'cmd-line';
      cmdDiv.innerHTML = `<span class="prompt">$</span> ${safeText(command)}`;

      const outDiv = document.createElement('div');
      outDiv.className = 'output';
      outDiv.innerHTML = formatOutput(command, outputData);

      terminalContent.appendChild(cmdDiv);
      terminalContent.appendChild(outDiv);
      terminalContent.scrollTop = terminalContent.scrollHeight;
    }

    
    function clearTerminal(){
      terminalContent.innerHTML = '';
    }

    
    function handleCommand(cmd){
      cmd = cmd.toLowerCase().trim();

      if(cmd === '') return;

      if(cmd === 'clear'){
        clearTerminal();
        return;
      }

      if(portfolioData.hasOwnProperty(cmd)){
        appendOutput(cmd, portfolioData[cmd]);
      } else {
        appendOutput(cmd, `Command not found: ${safeText(cmd)}\nType 'help' for list of available commands.`);
      }
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const cmd = input.value.trim();
      if(cmd){
        handleCommand(cmd);
        input.value = '';
      }
    });

    // Theme toggle
    function setTheme(dark){
      if(dark){
        body.classList.add('dark');
        themeToggle.textContent = '☀️';
        themeToggle.setAttribute('aria-label', 'Toggle light mode');
        themeToggle.setAttribute('aria-pressed', 'true');
      } else {
        body.classList.remove('dark');
        themeToggle.textContent = '🌙';
        themeToggle.setAttribute('aria-label', 'Toggle dark mode');
        themeToggle.setAttribute('aria-pressed', 'false');
      }
      input.focus();
    }

    // Toggle theme on button click or keyboard Enter/Space
    themeToggle.addEventListener('click', () => {
      setTheme(!body.classList.contains('dark'));
    });
    themeToggle.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        setTheme(!body.classList.contains('dark'));
      }
    });

    // Initialize with a welcome message and help prompt
    function printWelcome(){
      const welcome = `Welcome to Amal Joshy's Portfolio Terminal.
Type 'help' to see available commands.`;
      appendOutput('', welcome);
    }

    printWelcome();

    input.focus();
  })();
</script>
</body>
</html>
